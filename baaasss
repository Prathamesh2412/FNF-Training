using System;
using System.Collections.Generic;
using System.IO;
using System.Text.Json;

namespace LibraryManagementApp
{
    public class Book
    {
        public int BookId { get; set; }
        public string BookName { get; set; }
        public string Author { get; set; }
    }

    public class Library
    {
        private List<Book> books = new List<Book>();
        private const string DataFilePath = "library_data.json";

        public void LoadData()
        {
            if (File.Exists(DataFilePath))
            {
                var json = File.ReadAllText(DataFilePath);
                books = JsonSerializer.Deserialize<List<Book>>(json);
            }
        }

        public void SaveData()
        {
            var json = JsonSerializer.Serialize(books);
            File.WriteAllText(DataFilePath, json);
        }

        public void AddBook()
        {
            Console.WriteLine("Enter the ID of the book:");
            int id = int.Parse(Console.ReadLine());

            Console.WriteLine("Enter the name of the book:");
            string name = Console.ReadLine();

            Console.WriteLine("Enter the author of the book:");
            string author = Console.ReadLine();

            var newBook = new Book { BookId = id, BookName = name, Author = author };
            books.Add(newBook);
            SaveData();
            Console.WriteLine("Book added successfully.");
        }

        public void SearchBook()
        {
            Console.WriteLine("Enter the search term (author or title):");
            string searchTerm = Console.ReadLine();

            var foundBooks = books.FindAll(b => b.Author.Contains(searchTerm) || b.BookName.Contains(searchTerm));
            if (foundBooks.Count > 0)
            {
                Console.WriteLine("Found books:");
                foreach (var book in foundBooks)
                {
                    Console.WriteLine($"ID: {book.BookId}, Title: {book.BookName}, Author: {book.Author}");
                }
            }
            else
            {
                Console.WriteLine("No matching books found.");
            }
        }

        // Other methods (UpdateBook, RemoveBook) go here...
    }

    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Library Management System");
            var library = new Library();
            library.LoadData();

            do
            {
                Console.WriteLine("\nMenu:");
                Console.WriteLine("1: Add Book");
                Console.WriteLine("2: Search Book");
                Console.WriteLine("3: Exit");
                Console.Write("Enter your choice: ");
                int choice;
                if (int.TryParse(Console.ReadLine(), out choice))
                {
                    switch (choice)
                    {
                        case 1:
                            library.AddBook();
                            break;
                        case 2:
                            library.SearchBook();
                            break;
                        case 3:
                            Console.WriteLine("Exiting the application. Thank you!");
                            return;
                        default:
                            Console.WriteLine("Invalid choice. Please try again.");
                            break;
                    }
                }
                else
                {
                    Console.WriteLine("Invalid input. Please enter a valid numeric choice.");
                }
            } while (true);
        }
    }
}




















using ConsoleApp3;
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApp1
{
    public class Library
    {
        public int BookId { get; set; }
        public string BookName { get; set; } = string.Empty;
        public string Author { get; set; } = string.Empty;
    }

    public class Display()
    {
        private List<Library> inventry = new List<Library>();

        public void AddBook()
        {
            Library details = new Library();

            Console.WriteLine("Enter the id of the book to add:");
            details.BookId = int.Parse(Console.ReadLine());

            Console.WriteLine("Enter te name of the book:");
            details.BookName = Console.ReadLine();

            Console.WriteLine("Enter the Author of the book:");
            details.Author = Console.ReadLine();


            inventry.Add(details);
            Console.WriteLine("book added succesfully");
        }

        public void RemoveBook()
        {
            Console.WriteLine("Enter the ID of the expense to remove:");
            int id = int.Parse(Console.ReadLine());

            Library book = inventry.Find(e => e.BookId == id);
            if (book != null)
            {
                inventry.Remove(book);
                Console.WriteLine("Expense removed successfully.");
            }
            else
            {
                Console.WriteLine("Invalid ID. Expense not found.");
            }
        }

        public void FindBook()
        {
            Console.WriteLine("Enter the id of the book u want to find");
            string author = Console.ReadLine();

            Library book = inventry.Find(e => e.Author == author);
            if (book != null)
            {
                Console.WriteLine($"Book you were searching its id is{book.BookId}\n the Book Name is:{book.BookName}\n and its Author is:{book.Author}");
            }
            else
            {
                Console.WriteLine("book not found");
            }
        }
        public void UpdateDetails()
        {
            Console.WriteLine("enter the book id to update");
            int id = int.Parse(Console.ReadLine());

            Library book = inventry.Find(e => e.BookId == id);
            if (book != null)
            {
                Console.WriteLine("enter the new id for the book");
                book.BookId = int.Parse(Console.ReadLine());

                Console.WriteLine("enter the new book name");
                book.BookName = Console.ReadLine();

                Console.WriteLine("enter the new Author");
                book.Author = Console.ReadLine();

                Console.WriteLine("book updated succesfully");
            }
            else
            {
                Console.WriteLine("Invalid book id book not found");
            }

        }
        static void Main(string[] args)
        {
            Console.WriteLine("Library Management System");
            Display details = new Display();

            do { 
            Console.WriteLine("1: Add Bokk");
            Console.WriteLine("2: Update book details");
            Console.WriteLine("3: Remove book");
            Console.WriteLine("4: Find book by its author name");

            Console.WriteLine("Enter your choice:");
            int choice = int.Parse(Console.ReadLine());

            switch (choice)
            {
                case 1:
                        details.AddBook();
                    break;
                case 2:
                        details.UpdateDetails();
                    break;
                case 3:
                        details.RemoveBook();
                    break;
                case 4:
                        details.FindBook();
                    break;
                default:
                    Console.WriteLine("Invalid choice");
                    break;
            }
            Console.WriteLine("Press Enter to continue...");
            Console.ReadLine();
        } while (true);
        }
    }
}
