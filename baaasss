using System;
using System.Collections.Generic;
using System.Linq;
using System.Text.RegularExpressions;

namespace ConsoleApp1
{
    internal class library
    {
        static void Main(string[] args)
        {
            SortedDictionary<string, string> bookInfo = new SortedDictionary<string, string>();

            Console.WriteLine("Enter the book titles and authors separate author and title by world BY title by author ");

            List<string> input = new List<string>();
            while (true)
            {
                string entry = Console.ReadLine();
                if (string.IsNullOrWhiteSpace(entry))
                    break;
                input.Add(entry);
            }

            foreach (string book in input)
            {
                string[] parts = book.Split(new string[] { " by " }, StringSplitOptions.None);
                if (parts.Length == 2)
                {
                    string title = parts[0];
                    string author = parts[1].Split(new string[] { " and " }, StringSplitOptions.None)[0];
                    bookInfo[title] = author;
                }
            }

            var sortedTitles = bookInfo.OrderBy(kv => kv.Value).ThenBy(kv => kv.Key).Select(kv => kv.Key);

            foreach (var title in sortedTitles)
            {
                Console.WriteLine(title);
            }
        }
    }
}
